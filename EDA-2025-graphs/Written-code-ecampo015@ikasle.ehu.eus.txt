BinaryGraphReaderWriter.cs (10) : //27#
BinaryGraphReaderWriter.cs (16) : using (BinaryWriter writer = new BinaryWriter(File.Open(filename, FileMode.Create)))
BinaryGraphReaderWriter.cs (17) : {
BinaryGraphReaderWriter.cs (19) : int vertexCount = graph.VertexCount();
BinaryGraphReaderWriter.cs (20) : writer.Write(vertexCount);
BinaryGraphReaderWriter.cs (22) : foreach (TKey vertexKey in graph.Elements())
BinaryGraphReaderWriter.cs (23) : {
BinaryGraphReaderWriter.cs (24) : byte[] keyBytes = keyToByteArray(vertexKey);
BinaryGraphReaderWriter.cs (25) : writer.Write(keyBytes.Length);
BinaryGraphReaderWriter.cs (26) : writer.Write(keyBytes);
BinaryGraphReaderWriter.cs (27) : }
BinaryGraphReaderWriter.cs (29) : int edgeCount = graph.EdgeCount();
BinaryGraphReaderWriter.cs (30) : writer.Write(edgeCount);
BinaryGraphReaderWriter.cs (33) : foreach (TKey sourceKey in graph.Elements())
BinaryGraphReaderWriter.cs (34) : {
BinaryGraphReaderWriter.cs (35) : var sourceVertex = graph.GetVertex(sourceKey);
BinaryGraphReaderWriter.cs (37) : foreach (TKey destKey in sourceVertex.ConnectedElements())
BinaryGraphReaderWriter.cs (38) : {
BinaryGraphReaderWriter.cs (39) : TWeight weight = sourceVertex.GetEdgeWeight(destKey);
BinaryGraphReaderWriter.cs (42) : byte[] sourceBytes = keyToByteArray(sourceKey);
BinaryGraphReaderWriter.cs (43) : writer.Write(sourceBytes.Length);
BinaryGraphReaderWriter.cs (44) : writer.Write(sourceBytes);
BinaryGraphReaderWriter.cs (47) : byte[] weightBytes = weightToByteArray(weight);
BinaryGraphReaderWriter.cs (48) : writer.Write(weightBytes.Length);
BinaryGraphReaderWriter.cs (49) : writer.Write(weightBytes);
BinaryGraphReaderWriter.cs (52) : byte[] destBytes = keyToByteArray(destKey);
BinaryGraphReaderWriter.cs (53) : writer.Write(destBytes.Length);
BinaryGraphReaderWriter.cs (54) : writer.Write(destBytes);
BinaryGraphReaderWriter.cs (55) : }
BinaryGraphReaderWriter.cs (56) : }
BinaryGraphReaderWriter.cs (57) : }
BinaryGraphReaderWriter.cs (68) : //#28#
BinaryGraphReaderWriter.cs (74) : using (BinaryReader reader = new BinaryReader(File.Open(filename, FileMode.Open)))
BinaryGraphReaderWriter.cs (75) : {
BinaryGraphReaderWriter.cs (77) : int vertexCount = reader.ReadInt32();
BinaryGraphReaderWriter.cs (79) : for (int i = 0; i < vertexCount; i++)
BinaryGraphReaderWriter.cs (80) : {
BinaryGraphReaderWriter.cs (81) : int keyLength = reader.ReadInt32();
BinaryGraphReaderWriter.cs (82) : byte[] keyBytes = reader.ReadBytes(keyLength);
BinaryGraphReaderWriter.cs (83) : TKey vertexKey = keyFromByteArray(keyBytes);
BinaryGraphReaderWriter.cs (84) : graph.AddVertex(vertexKey);
BinaryGraphReaderWriter.cs (85) : }
BinaryGraphReaderWriter.cs (87) : int edgeCount = reader.ReadInt32();
BinaryGraphReaderWriter.cs (89) : for (int i = 0; i < edgeCount; i++)
BinaryGraphReaderWriter.cs (90) : {
BinaryGraphReaderWriter.cs (91) : int sourceLength = reader.ReadInt32();
BinaryGraphReaderWriter.cs (92) : byte[] sourceBytes = reader.ReadBytes(sourceLength);
BinaryGraphReaderWriter.cs (93) : TKey sourceKey = keyFromByteArray(sourceBytes);
BinaryGraphReaderWriter.cs (96) : int weightLength = reader.ReadInt32();
BinaryGraphReaderWriter.cs (97) : byte[] weightBytes = reader.ReadBytes(weightLength);
BinaryGraphReaderWriter.cs (98) : TWeight weight = weightFromByteArray(weightBytes);
BinaryGraphReaderWriter.cs (101) : int destLength = reader.ReadInt32();
BinaryGraphReaderWriter.cs (102) : byte[] destBytes = reader.ReadBytes(destLength);
BinaryGraphReaderWriter.cs (103) : TKey destKey = keyFromByteArray(destBytes);
BinaryGraphReaderWriter.cs (106) : graph.AddEdge(sourceKey, destKey, weight);
BinaryGraphReaderWriter.cs (107) : }
BinaryGraphReaderWriter.cs (108) : }
DirectedGraph.cs (18) : {
DirectedGraph.cs (20) : }
DistanceCalculator.cs (8) : private UndirectedGraph<String, double> graph;
DistanceCalculator.cs (14) : if (isUndirected)
DistanceCalculator.cs (15) : {
DistanceCalculator.cs (16) : graph = new UndirectedGraph<String, double>();
DistanceCalculator.cs (17) : }
DistanceCalculator.cs (18) : else
DistanceCalculator.cs (19) : {
DistanceCalculator.cs (20) : graph = new DirectedGraph<string, double>();
DistanceCalculator.cs (21) : }
DistanceCalculator.cs (27) : graph.AddVertex(city);
DistanceCalculator.cs (33) : graph.AddEdge(fromCity, toCity, distance);
DistanceCalculator.cs (42) : string nextCity = null;
DistanceCalculator.cs (43) : double minDistance = double.MaxValue;
DistanceCalculator.cs (45) : foreach (string city in nextCityCandidates.Keys())
DistanceCalculator.cs (46) : {
DistanceCalculator.cs (47) : double distance = nextCityCandidates.Get(city);
DistanceCalculator.cs (49) : if (!visited.Get(city) && distance < minDistance)
DistanceCalculator.cs (50) : {
DistanceCalculator.cs (51) : minDistance = distance;
DistanceCalculator.cs (52) : nextCity = city;
DistanceCalculator.cs (53) : }
DistanceCalculator.cs (54) : }
DistanceCalculator.cs (57) : return nextCity;
DistanceCalculator.cs (67) : var currentVertex = graph.GetVertex(currentCity);
DistanceCalculator.cs (69) : // Recorremos todos los vecinos
DistanceCalculator.cs (70) : foreach (string neighbour in currentVertex.ConnectedElements())
DistanceCalculator.cs (71) : {
DistanceCalculator.cs (72) : // Solo consideramos vecinos no visitados
DistanceCalculator.cs (73) : if (!visited.Get(neighbour))
DistanceCalculator.cs (74) : {
DistanceCalculator.cs (75) : double distanceThroughCurrent = distanceToCity.Get(currentCity) + currentVertex.GetEdgeWeight(neighbour);
DistanceCalculator.cs (77) : // Si el vecino no est� en distanceToCity a�n, inicializamos
DistanceCalculator.cs (78) : if (!distanceToCity.ContainsKey(neighbour) || distanceThroughCurrent < distanceToCity.Get(neighbour))
DistanceCalculator.cs (79) : {
DistanceCalculator.cs (80) : distanceToCity.AddOrUpdate(neighbour, distanceThroughCurrent); // suponiendo que AddOrUpdate existe
DistanceCalculator.cs (81) : nextCityCandidates.AddOrUpdate(neighbour, distanceThroughCurrent);
DistanceCalculator.cs (82) : }
DistanceCalculator.cs (83) : }
DistanceCalculator.cs (84) : }
GraphReaderWriter.cs (19) : // #25
GraphReaderWriter.cs (30) : foreach (TKey key in graph.Elements())
GraphReaderWriter.cs (31) : {
GraphReaderWriter.cs (32) : string encodedKey = EncodeString(keyToString(key));
GraphReaderWriter.cs (33) : writer.WriteLine(encodedKey);
GraphReaderWriter.cs (34) : }
GraphReaderWriter.cs (36) : writer.WriteLine();
GraphReaderWriter.cs (39) : {
GraphReaderWriter.cs (41) : {
GraphReaderWriter.cs (48) : }
GraphReaderWriter.cs (49) : }
GraphReaderWriter.cs (51) : writer.Close();
GraphReaderWriter.cs (73) : {
GraphReaderWriter.cs (75) : }
GraphReaderWriter.cs (80) : {
GraphReaderWriter.cs (85) : }
GraphReaderWriter.cs (86) : reader.Close();
