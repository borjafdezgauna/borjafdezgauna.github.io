BinaryGraphReaderWriter.cs (27) : writer.Write(graph.VertexCount());
BinaryGraphReaderWriter.cs (28) : TKey[] keys=graph.Elements();
BinaryGraphReaderWriter.cs (29) : for(int i = 0; i < graph.VertexCount(); i++)
BinaryGraphReaderWriter.cs (30) : {
BinaryGraphReaderWriter.cs (31) : byte[] keyBytes = keyToByteArray(keys[i]);
BinaryGraphReaderWriter.cs (32) : writer.Write(keyBytes.Length);
BinaryGraphReaderWriter.cs (33) : writer.Write(keyBytes);
BinaryGraphReaderWriter.cs (34) : }
BinaryGraphReaderWriter.cs (35) : writer.Write(graph.EdgeCount());
BinaryGraphReaderWriter.cs (36) : for(int i = 0; i < graph.VertexCount(); i++)
BinaryGraphReaderWriter.cs (37) : {
BinaryGraphReaderWriter.cs (38) : Vertex<TKey,TWeight> vertexOrigin=graph.GetVertex(graph.Elements()[i]);
BinaryGraphReaderWriter.cs (39) : TKey origin=graph.Elements()[i];
BinaryGraphReaderWriter.cs (40) : TKey[] keysConnected=vertexOrigin.ConnectedElements();
BinaryGraphReaderWriter.cs (41) : for(int j = 0; j < keysConnected.Length; j++)
BinaryGraphReaderWriter.cs (42) : {
BinaryGraphReaderWriter.cs (43) : byte[] OriginVertBytes=keyToByteArray(origin);
BinaryGraphReaderWriter.cs (44) : writer.Write(OriginVertBytes.Length);
BinaryGraphReaderWriter.cs (45) : writer.Write(OriginVertBytes);
BinaryGraphReaderWriter.cs (47) : byte[] WeightBytes=weightToByteArray(graph.GetEdgeWeight(origin,keysConnected[j]));
BinaryGraphReaderWriter.cs (48) : writer.Write(WeightBytes.Length);
BinaryGraphReaderWriter.cs (49) : writer.Write(WeightBytes);
BinaryGraphReaderWriter.cs (51) : byte[] DestVertBytes=keyToByteArray(keysConnected[j]);
BinaryGraphReaderWriter.cs (52) : writer.Write(DestVertBytes.Length);
BinaryGraphReaderWriter.cs (53) : writer.Write(DestVertBytes);
BinaryGraphReaderWriter.cs (55) : }
BinaryGraphReaderWriter.cs (56) : }
BinaryGraphReaderWriter.cs (83) : int numVertex=reader.ReadInt32();
BinaryGraphReaderWriter.cs (84) : for(int i = 0; i < numVertex; i++)
BinaryGraphReaderWriter.cs (85) : {
BinaryGraphReaderWriter.cs (86) : int keySize = reader.ReadInt32();
BinaryGraphReaderWriter.cs (87) : byte[] Bytevertex=reader.ReadBytes(keySize);
BinaryGraphReaderWriter.cs (88) : TKey key = keyFromByteArray(Bytevertex);
BinaryGraphReaderWriter.cs (89) : graph.AddVertex(key);
BinaryGraphReaderWriter.cs (90) : }
BinaryGraphReaderWriter.cs (91) : int numEdges=reader.ReadInt32();
BinaryGraphReaderWriter.cs (92) : for(int i = 0; i < numEdges; i++)
BinaryGraphReaderWriter.cs (93) : {
BinaryGraphReaderWriter.cs (94) : int keySizeO = reader.ReadInt32();
BinaryGraphReaderWriter.cs (96) : byte[] byteVertexOrigin=reader.ReadBytes(keySizeO);
BinaryGraphReaderWriter.cs (97) : TKey keyOrigin=keyFromByteArray(byteVertexOrigin);
BinaryGraphReaderWriter.cs (99) : int keySizeW = reader.ReadInt32();
BinaryGraphReaderWriter.cs (100) : byte[] byteEdge=reader.ReadBytes(keySizeW);
BinaryGraphReaderWriter.cs (101) : TWeight weightEdge=weightFromByteArray(byteEdge);
BinaryGraphReaderWriter.cs (103) : int keySizeD = reader.ReadInt32();
BinaryGraphReaderWriter.cs (104) : byte[] byteVertexDestination=reader.ReadBytes(keySizeD);
BinaryGraphReaderWriter.cs (105) : TKey keyDestination=keyFromByteArray(byteVertexDestination);
BinaryGraphReaderWriter.cs (106) : graph.AddEdge(keyOrigin,keyDestination,weightEdge);
BinaryGraphReaderWriter.cs (107) : }
DirectedGraph.cs (2) : using System.Collections.Generic;
DirectedGraph.cs (14) : Vertex<TElement, TWeight> finalVertex = GetVertex(destinationKey);
DirectedGraph.cs (15) : bool EdgeExisted = false;
DirectedGraph.cs (16) : TElement[] ElemnentsDest = finalVertex.ConnectedElements();
DirectedGraph.cs (17) : for(int i = 0; i < ElemnentsDest.Length; i++)
DirectedGraph.cs (18) : {
DirectedGraph.cs (19) : if (ElemnentsDest[i].Equals(sourceKey))
DirectedGraph.cs (20) : EdgeExisted = true;
DirectedGraph.cs (21) : }
DirectedGraph.cs (22) : base.AddEdge(sourceKey, destinationKey, weight);
DirectedGraph.cs (23) : if (!EdgeExisted)
DirectedGraph.cs (24) : finalVertex.RemoveEdge(sourceKey);
DirectedGraph.cs (33) : Vertex<TElement,TWeight> removeVertex= GetVertex(element);
DirectedGraph.cs (34) : Vertex<TElement,TWeight>[] vertexs=Vertices.Values();
DirectedGraph.cs (35) : for(int i = 0; i < vertexs.Length; i++)
DirectedGraph.cs (36) : {
DirectedGraph.cs (37) : if (!vertexs.Equals(removeVertex))
DirectedGraph.cs (38) : {
DirectedGraph.cs (39) : TElement[] elementsVer=vertexs[i].ConnectedElements();
DirectedGraph.cs (40) : for(int k = 0; k < elementsVer.Length; k++)
DirectedGraph.cs (41) : {
DirectedGraph.cs (42) : if(elementsVer[k].Equals(element))
DirectedGraph.cs (43) : base.RemoveEdge(vertexs[i].Element,element);
DirectedGraph.cs (44) : }
DirectedGraph.cs (45) : }
DirectedGraph.cs (46) : }
DirectedGraph.cs (47) : base.RemoveVertex(element);
DirectedGraph.cs (53) : base.RemoveEdge(sourceKey, destKey);
DistanceCalculator.cs (41) : String destination=null;
DistanceCalculator.cs (47) : bool check = false;
DistanceCalculator.cs (71) : String[] connectedCities= graph.GetVertex(currentCity).ConnectedElements();
DistanceCalculator.cs (72) : double distToCurrent = distanceToCity.Get(currentCity);
DistanceCalculator.cs (73) : String[] visitedKeys = visited.Keys();
DistanceCalculator.cs (74) : String[] distances=distanceToCity.Keys();
DistanceCalculator.cs (75) : String[] candidateKeys = nextCityCandidates.Keys();
DistanceCalculator.cs (78) : String vecino= connectedCities[i];
DistanceCalculator.cs (79) : bool isVisited = false;
DistanceCalculator.cs (80) : for (int j = 0; j < visitedKeys.Length; j++)
DistanceCalculator.cs (81) : {
DistanceCalculator.cs (82) : if (visitedKeys[j].Equals(vecino))
DistanceCalculator.cs (83) : {
DistanceCalculator.cs (84) : isVisited = true;
DistanceCalculator.cs (85) : }
DistanceCalculator.cs (86) : }
DistanceCalculator.cs (87) : if (!isVisited)
DistanceCalculator.cs (88) : {
DistanceCalculator.cs (89) : double dist = graph.GetEdgeWeight(currentCity,vecino);
DistanceCalculator.cs (90) : double newDist=dist+distToCurrent;
DistanceCalculator.cs (91) : bool HasDistance=false;
DistanceCalculator.cs (92) : for(int j = 0; j < distances.Length; j++)
DistanceCalculator.cs (93) : {
DistanceCalculator.cs (94) : if (distances[j].Equals(vecino))
DistanceCalculator.cs (95) : {
DistanceCalculator.cs (96) : HasDistance=true;
DistanceCalculator.cs (97) : }
DistanceCalculator.cs (98) : }
DistanceCalculator.cs (99) : if (!HasDistance)
DistanceCalculator.cs (100) : {
DistanceCalculator.cs (101) : distanceToCity.Add(vecino,newDist);
DistanceCalculator.cs (102) : nextCityCandidates.Add(vecino,newDist);
DistanceCalculator.cs (103) : }
DistanceCalculator.cs (104) : else
DistanceCalculator.cs (105) : {
DistanceCalculator.cs (106) : double oldDistance=distanceToCity.Get(vecino);
DistanceCalculator.cs (107) : if (oldDistance > newDist)
DistanceCalculator.cs (108) : {
DistanceCalculator.cs (109) : distanceToCity.Remove(vecino);
DistanceCalculator.cs (110) : distanceToCity.Add(vecino,newDist);
DistanceCalculator.cs (111) : }
DistanceCalculator.cs (112) : bool isInCandidates = false;
DistanceCalculator.cs (113) : for(int m = 0; m < candidateKeys.Length; m++)
DistanceCalculator.cs (114) : {
DistanceCalculator.cs (115) : if(candidateKeys[m].Equals(vecino))
DistanceCalculator.cs (116) : {
DistanceCalculator.cs (117) : isInCandidates = true;
DistanceCalculator.cs (118) : }
DistanceCalculator.cs (119) : }
DistanceCalculator.cs (121) : if (isInCandidates)
DistanceCalculator.cs (122) : {
DistanceCalculator.cs (123) : nextCityCandidates.Remove(vecino);
DistanceCalculator.cs (124) : }
DistanceCalculator.cs (125) : nextCityCandidates.Add(vecino, newDist);
DistanceCalculator.cs (126) : }
DistanceCalculator.cs (127) : }
DistanceCalculator.cs (128) : }
DistanceCalculator.cs (146) : distanceToCity.Add(fromCity, 0);
DistanceCalculator.cs (147) : nextCityCandidate.Add(fromCity, 0);
DistanceCalculator.cs (148) : string currentCity = fromCity;
DistanceCalculator.cs (149) : string[] visitedKeys = visited.Keys();
DistanceCalculator.cs (150) : while (currentCity != null)
DistanceCalculator.cs (152) : bool alreadyInVisited = false;
DistanceCalculator.cs (153) : for(int i = 0; i < visitedKeys.Length; i++)
DistanceCalculator.cs (154) : {
DistanceCalculator.cs (155) : if (visitedKeys[i].Equals(currentCity))
DistanceCalculator.cs (156) : {
DistanceCalculator.cs (157) : alreadyInVisited = true;
DistanceCalculator.cs (158) : }
DistanceCalculator.cs (161) : if (!alreadyInVisited)
DistanceCalculator.cs (163) : visited.Add(currentCity, true);
DistanceCalculator.cs (164) : }
DistanceCalculator.cs (168) : currentCity = ChooseNextUnvisitedCity(visited, nextCityCandidate);
DistanceCalculator.cs (169) : }
DistanceCalculator.cs (170) : string[] allVertices = graph.Elements();
DistanceCalculator.cs (171) : string[] calculatedKeys = distanceToCity.Keys();
DistanceCalculator.cs (173) : for(int i = 0; i < allVertices.Length; i++)
DistanceCalculator.cs (174) : {
DistanceCalculator.cs (175) : string vertex = allVertices[i];
DistanceCalculator.cs (176) : bool found = false;
DistanceCalculator.cs (177) : for(int j = 0; j < calculatedKeys.Length; j++)
DistanceCalculator.cs (179) : if(calculatedKeys[j].Equals(vertex))
DistanceCalculator.cs (181) : found = true;
DistanceCalculator.cs (184) : if(!found)
DistanceCalculator.cs (185) : {
DistanceCalculator.cs (186) : distanceToCity.Add(vertex, double.MaxValue);
DistanceCalculator.cs (188) : }
DistanceCalculator.cs (189) : return distanceToCity;
GraphReaderWriter.cs (51) : for (int i = 0; i < elements.Length; i++)
GraphReaderWriter.cs (53) : TKey sourceKey=elements[i];
GraphReaderWriter.cs (57) : TKey destKey=keys[j];
GraphReaderWriter.cs (60) : if(!sourceKey.Equals(destKey))
GraphReaderWriter.cs (61) : writer.WriteLine(EncodeString(keyToString(sourceKey) + "->" + weightToString(graph.GetEdgeWeight(sourceKey,destKey)) + "->" + keyToString(destKey) ));
GraphReaderWriter.cs (62) : }
